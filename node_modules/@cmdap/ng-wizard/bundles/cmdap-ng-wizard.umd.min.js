!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/router"),require("@angular/core")):"function"==typeof define&&define.amd?define("@cmdap/ng-wizard",["exports","rxjs","rxjs/operators","@angular/common","@angular/router","@angular/core"],r):r((t.cmdap=t.cmdap||{},t.cmdap["ng-wizard"]={}),t.rxjs,t.rxjs.operators,t.ng.common,t.ng.router,t.ng.core)}(this,function(t,r,n,e,a,o){"use strict";var i=function(t,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(t,r)};function s(t,r){function n(){this.constructor=t}i(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var p=function(){return(p=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t}).apply(this,arguments)};function c(t,r){return t.find(function(t){return t.path===r})}function u(t){return t.data&&t.data.title?t.data.title:function r(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t}(function n(t){return t?t.replace(/[-_]/g," ").trim():t}(t.path))}var d={NO_WIZARD_ROUTE:0,NO_CHILD_ROUTES:1,NO_WS_INTERFACE:2};d[d.NO_WIZARD_ROUTE]="NO_WIZARD_ROUTE",d[d.NO_CHILD_ROUTES]="NO_CHILD_ROUTES",d[d.NO_WS_INTERFACE]="NO_WS_INTERFACE";var l,g=(s(h,l=Error),h);function h(t,r){var n=l.call(this,r)||this;return n.wizardComponentName="",n.wizardPath="",n.stepComponentName="",n.type=t,n}var v,f=(s(m,v=g),m);function m(t){var r=v.call(this,d.NO_WIZARD_ROUTE,"No route configuration for the "+t+" found.")||this;return r.wizardComponentName=t,r}var w,z=(s(S,w=g),S);function S(t,r){var n=w.call(this,d.NO_CHILD_ROUTES,"No child routes for the "+t+" found.")||this;return n.wizardComponentName=t,n.wizardPath=r,n}var b,N=(s(D,b=g),D);function D(t){var r=b.call(this,d.NO_WS_INTERFACE,"The "+t+" does not extend the NgWizardStep class or implement the NgWizardStepInterface.")||this;return r.stepComponentName=t,r}var y=(C.prototype.loadWizardRoutes=function(t){if(this.wizardRoute=this.getWizardRoute(t),!this.wizardRoute)throw new f(t);this.wizardOptions=function r(t){return t?p({},{navBar:{icons:{previous:'<i class="material-icons ng-wizard-icon">done</i>',current:'<i class="material-icons ng-wizard-icon">create</i>',next:'<i class="material-icons ng-wizard-icon">lock</i>'}},buttons:{previous:{label:'<i class="material-icons ng-wizard-icon">chevron_left</i> Previous'},next:{label:'Next <i class="material-icons ng-wizard-icon">chevron_right</i>'}}},t):{navBar:{icons:{previous:'<i class="material-icons ng-wizard-icon">done</i>',current:'<i class="material-icons ng-wizard-icon">create</i>',next:'<i class="material-icons ng-wizard-icon">lock</i>'}},buttons:{previous:{label:'<i class="material-icons ng-wizard-icon">chevron_left</i> Previous'},next:{label:'Next <i class="material-icons ng-wizard-icon">chevron_right</i>'}}}}(this.wizardRoute.data),this.loadChildRoutes(this.wizardRoute)},C.prototype.registerActiveComponent=function(t){if(!function r(t){return"wsIsValid"in t&&"wsOnNext"in t&&"wsOnPrevious"in t}(t))throw new N(t.constructor.name);this.currentComponent=t,this.currentStepData=function n(t,r){return c(t,r.split("/").pop().split("?")[0])}(this.stepData,this.router.url),this.currentStepData.componentRef=t,this.resetCurrentStep(),this.currentStepData.isCurrent=!0,this.onStepDataChange()},C.prototype.navigateToStep=function(t){if(!1!==(this.currentStepData.order>t.order?this.currentComponent.wsOnPrevious():this.currentComponent.wsIsValid()&&this.currentComponent.wsOnNext())){var r=t.path;return this.wizardRoute.path&&(r=[this.wizardRoute.path,t.path].join("/")),t.options.cleanQueryParameters?this.router.navigate([r],{queryParams:{}}):this.router.navigate([r],{queryParamsHandling:"merge"})}},C.prototype.navigateToNextStep=function(){var t=c(this.stepData,this.currentStepData.nextStep);return this.navigateToStep(t)},C.prototype.navigateToPreviousStep=function(){var t=c(this.stepData,this.currentStepData.previousStep);return this.navigateToStep(t)},C.prototype.navigateToPath=function(t){return this.router.navigate([t],{queryParamsHandling:"merge"})},C.prototype.getStepDataChangesAsObservable=function(){return this.stepDataChanges.asObservable()},C.prototype.getCurrentStepDataAsObservable=function(){return this.getStepDataChangesAsObservable().pipe(n.map(function(t){return t.find(function(t){return t.isCurrent})}))},C.prototype.getWizardRoute=function(r){return this.router.config.find(function(t){return t.component&&t.component.name===r})},C.prototype.loadChildRoutes=function(t){if(!t.children)throw new z(t.component.name,t.path);var r=t.children.filter(function(t){return t.component});this.stepData=[];for(var n=0;n<r.length;n++)this.registerStep(n,r[n],r[n-1],r[n+1])},C.prototype.registerStep=function(t,r,n,e){this.stepData.push({order:t+1,componentName:r.component.name,path:r.path,previousStep:n?n.path:undefined,nextStep:e?e.path:undefined,isCurrent:!1,options:function a(t){return t.data?p({},t.data,{title:u(t)}):{title:u(t)}}(r)}),this.onStepDataChange()},C.prototype.onStepDataChange=function(){this.stepDataChanges.next(this.stepData)},C.prototype.resetCurrentStep=function(){this.stepData.map(function(t){return t.isCurrent=!1,t})},C.decorators=[{type:o.Injectable}],C.ctorParameters=function(){return[{type:a.Router}]},C);function C(t){this.router=t,this.stepData=[],this.stepDataChanges=new r.BehaviorSubject([])}var O=(x.prototype.onActivate=function(t){try{this.service.registerActiveComponent(t)}catch(r){this.error=r}},x.decorators=[{type:o.Component,args:[{selector:"ng-wizard",template:'<div class="ng-wizard-container">\r\n  <ng-wizard-error [error]="error"></ng-wizard-error>\r\n  <ng-wizard-navigation></ng-wizard-navigation>\r\n  <div class="ng-wizard-content-container">\r\n    <router-outlet (activate)="onActivate($event)"></router-outlet>\r\n  </div>\r\n  <ng-wizard-buttons></ng-wizard-buttons>\r\n</div>\r\n'}]}],x.ctorParameters=function(){return[{type:y}]},x);function x(t){this.service=t;try{this.service.loadWizardRoutes(this.constructor.name)}catch(r){this.error=r}}var _=(T.decorators=[{type:o.Component,args:[{selector:"ng-wizard-error",template:'<div *ngIf="error" class="ng-wizard-error">\r\n  <div [ngSwitch]="error.type" class="ng-wizard-error-message">\r\n\r\n    \x3c!-- NO_WIZARD_ROUTE error --\x3e\r\n\r\n    <span *ngSwitchCase="NgWizardErrorType.NO_WIZARD_ROUTE" class="no-wizard-route">\r\n      No route configuration for the {{ error.wizardComponentName }} found.<br/>\r\n      Add a route for the {{ error.wizardComponentName }} to your AppRoutingModule.<br/>\r\n      <pre>\r\nconst routes: Routes = [\r\n    &#123; path: \'\', component: {{ error.wizardComponentName }} &#125;,\r\n];\r\n\r\n@NgModule(&#123;\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n&#125;)\r\nexport class AppRoutingModule &#123; &#125;</pre>\r\n    </span>\r\n\r\n    \x3c!-- NO_CHILD_ROUTES error --\x3e\r\n\r\n    <span *ngSwitchCase="NgWizardErrorType.NO_CHILD_ROUTES" class="no-child-routes">\r\n      No child routes for the {{ error.wizardComponentName }} found.<br/>\r\n      Add at least one child route for the {{ error.wizardComponentName }} to your AppRoutingModule.<br/>\r\n      <pre>\r\n&#123; path: \'{{ error.wizardPath }}\', component: {{ error.wizardComponentName }}, children: [\r\n    &#123; path: \'step1\', component: Step1Component &#125;,\r\n    &#123; path: \'**\', redirectTo: \'step1\' &#125;,\r\n] &#125;,</pre>\r\n    </span>\r\n\r\n    \x3c!-- NO_WS_INTERFACE error --\x3e\r\n\r\n    <span *ngSwitchCase="NgWizardErrorType.NO_WS_INTERFACE" class="no-ws-interface">\r\n      The {{ error.stepComponentName}} does not extend the NgWizardStep class or implement the\r\n      NgWizardStepInterface.<br/>\r\n      Extend the NgWizardStep class in your {{ error.stepComponentName}} or implement the\r\n      NgWizardStepInterface.<br/>\r\n      <pre>\r\n@NgComponent(...)\r\nexport class {{ error.stepComponentName }} extends NgWizardStep &#123;\r\n    constructor() &#123;\r\n        super();\r\n    &#125;\r\n&#125;</pre><br/>\r\n      or<br/>\r\n      <pre>\r\n@NgComponent(...)\r\nexport class {{ error.stepComponentName }} implements NgWizardStepInterface &#123;\r\n    wsIsValid() &#123;\r\n        return true;\r\n    &#125;\r\n    wsOnNext() &#123; &#125;\r\n    wsOnPrevious() &#123; &#125;\r\n&#125;</pre>\r\n    </span>\r\n\r\n  </div>\r\n</div>\r\n',styles:[".ng-wizard-error{border:1px solid #d71117;border-radius:5px;color:#d71117;padding:10px 10px 0;margin-top:10px}.ng-wizard-error .ng-wizard-error-message pre{display:inline-block;border-radius:3px;background-color:rgba(218,215,197,.4);color:#4d4d4d;padding:15px}"]}]}],T.propDecorators={error:[{type:o.Input}]},T);function T(){this.NgWizardErrorType=d}var R=(I.prototype.ngOnInit=function(){var r=this;this.stepData$=this.service.getStepDataChangesAsObservable(),this.service.getCurrentStepDataAsObservable().subscribe(function(t){return r.currentStepData=t}),this.wizardOptions=this.service.wizardOptions},I.prototype.goToStep=function(t){this.currentStepData&&this.currentStepData.options&&this.currentStepData.options.disableNavigation||t.order>=this.currentStepData.order||this.service.navigateToStep(t)},I.decorators=[{type:o.Component,args:[{selector:"ng-wizard-navigation",template:'<div class="ng-wizard-navigation-container">\r\n  <nav class="ng-wizard-navigation">\r\n    <ul class="ng-wizard-navigation-list">\r\n      <li *ngFor="let stepData of stepData$ | async" class="ng-wizard-navigation-list-item" (click)="goToStep(stepData);">\r\n        <div *ngIf="stepData?.order < currentStepData?.order"\r\n             [ngClass]="{\r\n               \'ng-wizard-navigation-link\': !currentStepData?.options.disableNavigation,\r\n               \'ng-wizard-navigation-disabled\': currentStepData?.options.disableNavigation\r\n             }">\r\n          <span [innerHTML]="stepData.options.icon || wizardOptions.navBar.icons.previous" class="ng-wizard-navigation-icon"></span>\r\n          <span class="ng-wizard-navigation-label">\r\n            {{ stepData.options.title }}\r\n          </span>\r\n        </div>\r\n\r\n        <div\r\n          *ngIf="stepData?.order === currentStepData?.order"\r\n          class="ng-wizard-navigation-active">\r\n          <span [innerHTML]="stepData.options.icon || wizardOptions.navBar.icons.current" class="ng-wizard-navigation-icon"></span>\r\n          <span class="ng-wizard-navigation-label">\r\n            {{ stepData.options.title }}\r\n          </span>\r\n        </div>\r\n\r\n        <div *ngIf="stepData?.order > currentStepData?.order"\r\n             class="ng-wizard-navigation-disabled">\r\n          <span [innerHTML]="stepData.options.icon || wizardOptions.navBar.icons.next" class="ng-wizard-navigation-icon"></span>\r\n          <span class="ng-wizard-navigation-label">\r\n            {{ stepData.options.title }}\r\n          </span>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</div>\r\n',styles:[""]}]}],I.ctorParameters=function(){return[{type:y}]},I);function I(t){this.service=t}var W=(E.prototype.ngOnInit=function(){this.currentStepData$=this.service.getCurrentStepDataAsObservable(),this.wizardOptions=this.service.wizardOptions},E.prototype.goToNextStep=function(){this.service.navigateToNextStep()},E.prototype.goToPreviousStep=function(){this.service.navigateToPreviousStep()},E.prototype.goToPath=function(t){this.service.navigateToPath(t)},E.decorators=[{type:o.Component,args:[{selector:"ng-wizard-buttons",template:'<div class="ng-wizard-buttons-container">\r\n  <div *ngIf="currentStepData$ | async as currentStepData" class="ng-wizard-buttons">\r\n    <button *ngIf="currentStepData.options.buttons?.extra"\r\n            (click)="goToPath(currentStepData.options.buttons?.extra.path)"\r\n            class="ng-wizard-button-extra">\r\n      <span\r\n        [innerHTML]="currentStepData.options.buttons.extra.label"\r\n        class="ng-wizard-button-label"></span>\r\n    </button>\r\n    <button *ngIf="currentStepData.previousStep && !currentStepData.options.buttons?.previous?.hidden"\r\n            (click)="goToPreviousStep()"\r\n            class="ng-wizard-button-previous">\r\n      <span\r\n        [innerHTML]="currentStepData.options.buttons?.previous?.label || wizardOptions.buttons.previous.label"\r\n        class="ng-wizard-button-label"></span>\r\n    </button>\r\n    <button *ngIf="currentStepData.nextStep && !currentStepData.options.buttons?.next?.hidden"\r\n            (click)="goToNextStep()"\r\n            class="ng-wizard-button-next">\r\n      <span\r\n        [innerHTML]="currentStepData.options.buttons?.next?.label || wizardOptions.buttons.next.label"\r\n        class="ng-wizard-button-label"></span>\r\n    </button>\r\n  </div>\r\n</div>\r\n',styles:[""]}]}],E.ctorParameters=function(){return[{type:y}]},E);function E(t){this.service=t}var A=(P.decorators=[{type:o.NgModule,args:[{declarations:[O,_,R,W],imports:[e.CommonModule,a.RouterModule],providers:[y],exports:[O]}]}],P);function P(){}var M=(j.prototype.wsIsValid=function(){return!0},j.prototype.wsOnNext=function(){},j.prototype.wsOnPrevious=function(){},j);function j(){}t.NgWizardComponent=O,t.NgWizardModule=A,t.NgWizardStep=M,t.ɵd=W,t.ɵb=_,t.ɵc=R,t.ɵa=y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cmdap-ng-wizard.umd.min.js.map